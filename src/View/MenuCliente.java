package View;

import Classes.Endereco;
import Classes.Faturas;
import Classes.Tarifas;
import ConexaoBD.EnderecoBD;
import ConexaoBD.FaturasBD;
import ConexaoBD.TarifasBD;
import TableModel.FaturasTableModel;
import br.com.parg.viacep.ViaCEP;
import br.com.parg.viacep.ViaCEPException;
import java.awt.CardLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.PrintJob;
import java.awt.Toolkit;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.text.DateFormat;
import java.text.NumberFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import javax.swing.JOptionPane;

/**
 *
 * @author thais
 */
public class MenuCliente extends javax.swing.JFrame {

    Endereco cliente = new Endereco();
    EnderecoBD enderecoBD = new EnderecoBD();
    TarifasBD tarifasBD = new TarifasBD();
    Tarifas tarifas = new Tarifas();

    FaturasBD faturaBD = new FaturasBD();
    Faturas fatura = new Faturas();

    FaturasTableModel faturaTM = new FaturasTableModel();

    /**
     * Creates new form MenuCliente
     */
    public MenuCliente(Endereco endereco) {
        initComponents();

        cliente = endereco;
        this.setLocationRelativeTo(null);
        tarifaAtual();
        carregarCampos();
        HabilitarMeuCadastro(false);

        jtFaturas.setModel(faturaTM);

        carregarTable();

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        MenuSuperior = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        Menu = new javax.swing.JPanel();
        btnMeuCadastro = new javax.swing.JButton();
        btnFaturas = new javax.swing.JButton();
        btnSair = new javax.swing.JButton();
        lblBandeira = new javax.swing.JLabel();
        Principal = new javax.swing.JPanel();
        Faturas = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jtFaturas = new javax.swing.JTable();
        Fatura = new javax.swing.JPanel();
        lblBandFatura = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabelTarifa = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        lblValorTotalKw = new javax.swing.JLabel();
        lblValorKw2 = new javax.swing.JLabel();
        lblEndereco = new javax.swing.JLabel();
        lblNome = new javax.swing.JLabel();
        lblBairro = new javax.swing.JLabel();
        lblCEP = new javax.swing.JLabel();
        lblValorImposto = new javax.swing.JLabel();
        lblValorKw6 = new javax.swing.JLabel();
        lblValorKw7 = new javax.swing.JLabel();
        lblDataVenc = new javax.swing.JLabel();
        lblValorKw8 = new javax.swing.JLabel();
        lblQtdKw = new javax.swing.JLabel();
        lblPorcentagemBand = new javax.swing.JLabel();
        lblValorKwPorcentagem = new javax.swing.JLabel();
        lblQtdKw4 = new javax.swing.JLabel();
        lblValorKw = new javax.swing.JLabel();
        lblCidadeUF = new javax.swing.JLabel();
        lblValorTotal = new javax.swing.JLabel();
        lblImposto = new javax.swing.JLabel();
        btnImprimir = new javax.swing.JButton();
        MeuCadastro = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jtfNum = new javax.swing.JTextField();
        jtfNome = new javax.swing.JTextField();
        jtfUF = new javax.swing.JTextField();
        jtfRua = new javax.swing.JTextField();
        jtfCEP = new javax.swing.JTextField();
        jtfBairro = new javax.swing.JTextField();
        jtfCidade = new javax.swing.JTextField();
        jtfUsuario = new javax.swing.JTextField();
        jtfSenha = new javax.swing.JPasswordField();
        CampoCidade = new javax.swing.JLabel();
        CampoRua3 = new javax.swing.JLabel();
        CampoRua5 = new javax.swing.JLabel();
        CampoBairro1 = new javax.swing.JLabel();
        CampoRua6 = new javax.swing.JLabel();
        CampoRua7 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        CampoUsuario = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        CampoSenha = new javax.swing.JLabel();
        btnSalvarMeuC = new javax.swing.JButton();
        btnEditarMeuC = new javax.swing.JButton();
        btnCancelarMeuC = new javax.swing.JButton();
        CampoRua4 = new javax.swing.JLabel();
        btnBuscarCEP = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setUndecorated(true);

        MenuSuperior.setBackground(new java.awt.Color(255, 255, 255));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/Logo CPFL.png"))); // NOI18N

        Menu.setBackground(new java.awt.Color(0, 152, 209));
        Menu.setLayout(null);

        btnMeuCadastro.setBackground(new java.awt.Color(0, 152, 209));
        btnMeuCadastro.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnMeuCadastro.setForeground(new java.awt.Color(255, 255, 255));
        btnMeuCadastro.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconsUsuario.png"))); // NOI18N
        btnMeuCadastro.setText("Meu Cadastro");
        btnMeuCadastro.setBorder(null);
        btnMeuCadastro.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnMeuCadastro.setFocusPainted(false);
        btnMeuCadastro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMeuCadastroActionPerformed(evt);
            }
        });
        Menu.add(btnMeuCadastro);
        btnMeuCadastro.setBounds(180, 0, 190, 40);

        btnFaturas.setBackground(new java.awt.Color(0, 152, 209));
        btnFaturas.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnFaturas.setForeground(new java.awt.Color(255, 255, 255));
        btnFaturas.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconFaturas.png"))); // NOI18N
        btnFaturas.setText("Minhas Faturas");
        btnFaturas.setBorder(null);
        btnFaturas.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnFaturas.setFocusPainted(false);
        btnFaturas.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFaturasActionPerformed(evt);
            }
        });
        Menu.add(btnFaturas);
        btnFaturas.setBounds(0, 0, 180, 40);

        btnSair.setBackground(new java.awt.Color(0, 152, 209));
        btnSair.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnSair.setForeground(new java.awt.Color(255, 255, 255));
        btnSair.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconSair.png"))); // NOI18N
        btnSair.setText("Sair");
        btnSair.setBorder(null);
        btnSair.setBorderPainted(false);
        btnSair.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnSair.setFocusPainted(false);
        btnSair.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSairActionPerformed(evt);
            }
        });
        Menu.add(btnSair);
        btnSair.setBounds(1260, 0, 100, 40);

        lblBandeira.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        lblBandeira.setForeground(new java.awt.Color(0, 152, 209));
        lblBandeira.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/Verde.png"))); // NOI18N

        javax.swing.GroupLayout MenuSuperiorLayout = new javax.swing.GroupLayout(MenuSuperior);
        MenuSuperior.setLayout(MenuSuperiorLayout);
        MenuSuperiorLayout.setHorizontalGroup(
            MenuSuperiorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(MenuSuperiorLayout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 1099, Short.MAX_VALUE)
                .addComponent(lblBandeira, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(32, 32, 32))
            .addComponent(Menu, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        MenuSuperiorLayout.setVerticalGroup(
            MenuSuperiorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(MenuSuperiorLayout.createSequentialGroup()
                .addGroup(MenuSuperiorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addGroup(MenuSuperiorLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(lblBandeira)))
                .addGap(0, 0, 0)
                .addComponent(Menu, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        Principal.setBackground(new java.awt.Color(255, 255, 255));
        Principal.setLayout(new java.awt.CardLayout());

        Faturas.setBackground(new java.awt.Color(255, 255, 255));
        Faturas.setLayout(null);

        jtFaturas.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {},
                {},
                {},
                {}
            },
            new String [] {

            }
        ));
        jtFaturas.setGridColor(new java.awt.Color(255, 255, 255));
        jtFaturas.setShowHorizontalLines(false);
        jtFaturas.setShowVerticalLines(false);
        jtFaturas.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jtFaturasMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jtFaturas);

        Faturas.add(jScrollPane1);
        jScrollPane1.setBounds(90, 40, 420, 520);

        Fatura.setBackground(new java.awt.Color(204, 204, 255));
        Fatura.setLayout(null);

        lblBandFatura.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblBandFatura.setText("Cor");
        lblBandFatura.setToolTipText("");
        Fatura.add(lblBandFatura);
        lblBandFatura.setBounds(190, 420, 70, 13);

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        jLabel10.setText("Impostos");
        Fatura.add(jLabel10);
        jLabel10.setBounds(90, 450, 60, 15);

        jLabelTarifa.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        jLabelTarifa.setText("Tarifa/Preço");
        Fatura.add(jLabelTarifa);
        jLabelTarifa.setBounds(320, 350, 70, 15);

        jLabel14.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        jLabel14.setText("Consumo Bandeira");
        Fatura.add(jLabel14);
        jLabel14.setBounds(90, 420, 100, 15);

        jLabel15.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        jLabel15.setText("Consumo Uso Sistema KWh");
        Fatura.add(jLabel15);
        jLabel15.setBounds(90, 390, 150, 15);

        lblValorTotalKw.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorTotalKw.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblValorTotalKw.setText("0");
        Fatura.add(lblValorTotalKw);
        lblValorTotalKw.setBounds(400, 390, 60, 15);

        lblValorKw2.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKw2.setText("Valor (R$)");
        Fatura.add(lblValorKw2);
        lblValorKw2.setBounds(410, 350, 60, 20);

        lblEndereco.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lblEndereco.setText("Rua, Nº");
        Fatura.add(lblEndereco);
        lblEndereco.setBounds(110, 110, 240, 15);

        lblNome.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lblNome.setText("Nome");
        Fatura.add(lblNome);
        lblNome.setBounds(110, 90, 240, 15);

        lblBairro.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lblBairro.setText("Bairro");
        Fatura.add(lblBairro);
        lblBairro.setBounds(110, 130, 240, 15);

        lblCEP.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lblCEP.setText("CEP");
        Fatura.add(lblCEP);
        lblCEP.setBounds(110, 150, 90, 15);

        lblValorImposto.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorImposto.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblValorImposto.setText("0");
        Fatura.add(lblValorImposto);
        lblValorImposto.setBounds(400, 450, 60, 15);

        lblValorKw6.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKw6.setText("VENCIMENTO");
        Fatura.add(lblValorKw6);
        lblValorKw6.setBounds(270, 240, 90, 20);

        lblValorKw7.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKw7.setText("TOTAL A PAGAR");
        Fatura.add(lblValorKw7);
        lblValorKw7.setBounds(390, 240, 110, 20);

        lblDataVenc.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblDataVenc.setText("Dia/Mês/Ano");
        Fatura.add(lblDataVenc);
        lblDataVenc.setBounds(260, 270, 110, 20);

        lblValorKw8.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKw8.setText("Quantidade");
        Fatura.add(lblValorKw8);
        lblValorKw8.setBounds(240, 350, 60, 15);

        lblQtdKw.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblQtdKw.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblQtdKw.setText("0");
        Fatura.add(lblQtdKw);
        lblQtdKw.setBounds(240, 390, 60, 15);

        lblPorcentagemBand.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblPorcentagemBand.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblPorcentagemBand.setText("0");
        Fatura.add(lblPorcentagemBand);
        lblPorcentagemBand.setBounds(320, 420, 60, 15);

        lblValorKwPorcentagem.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKwPorcentagem.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblValorKwPorcentagem.setText("0");
        Fatura.add(lblValorKwPorcentagem);
        lblValorKwPorcentagem.setBounds(400, 420, 60, 15);

        lblQtdKw4.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblQtdKw4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblQtdKw4.setText("0");
        Fatura.add(lblQtdKw4);
        lblQtdKw4.setBounds(240, 420, 60, 15);

        lblValorKw.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorKw.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblValorKw.setText("0");
        Fatura.add(lblValorKw);
        lblValorKw.setBounds(320, 390, 60, 15);

        lblCidadeUF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lblCidadeUF.setText("Cidade/UF");
        Fatura.add(lblCidadeUF);
        lblCidadeUF.setBounds(210, 150, 90, 15);

        lblValorTotal.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblValorTotal.setText("R$");
        Fatura.add(lblValorTotal);
        lblValorTotal.setBounds(390, 270, 110, 20);

        lblImposto.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        lblImposto.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblImposto.setText("0");
        Fatura.add(lblImposto);
        lblImposto.setBounds(320, 450, 60, 15);

        Faturas.add(Fatura);
        Fatura.setBounds(640, 30, 600, 540);

        btnImprimir.setText("jButton1");
        btnImprimir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnImprimirActionPerformed(evt);
            }
        });
        Faturas.add(btnImprimir);
        btnImprimir.setBounds(1270, 150, 73, 23);

        Principal.add(Faturas, "Faturas");
        Faturas.getAccessibleContext().setAccessibleName("");

        MeuCadastro.setBackground(new java.awt.Color(255, 255, 255));
        MeuCadastro.setLayout(null);

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(0, 152, 209));
        jLabel2.setText("UF:");
        MeuCadastro.add(jLabel2);
        jLabel2.setBounds(760, 290, 30, 20);

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(0, 152, 209));
        jLabel3.setText("Nome:");
        MeuCadastro.add(jLabel3);
        jLabel3.setBounds(440, 30, 38, 15);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(0, 152, 209));
        jLabel4.setText("Rua:");
        MeuCadastro.add(jLabel4);
        jLabel4.setBounds(440, 90, 38, 15);

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(0, 152, 209));
        jLabel5.setText("Nº:");
        MeuCadastro.add(jLabel5);
        jLabel5.setBounds(750, 90, 38, 15);

        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel6.setForeground(new java.awt.Color(0, 152, 209));
        jLabel6.setText("CEP:");
        MeuCadastro.add(jLabel6);
        jLabel6.setBounds(440, 153, 38, 20);

        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(0, 152, 209));
        jLabel7.setText("Bairro:");
        MeuCadastro.add(jLabel7);
        jLabel7.setBounds(440, 230, 60, 15);

        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(0, 152, 209));
        jLabel8.setText("Cidade:");
        MeuCadastro.add(jLabel8);
        jLabel8.setBounds(440, 290, 60, 15);

        jtfNum.setBackground(new java.awt.Color(235, 235, 235));
        jtfNum.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfNum.setBorder(null);
        MeuCadastro.add(jtfNum);
        jtfNum.setBounds(760, 120, 50, 20);

        jtfNome.setBackground(new java.awt.Color(235, 235, 235));
        jtfNome.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfNome.setBorder(null);
        MeuCadastro.add(jtfNome);
        jtfNome.setBounds(440, 50, 360, 20);

        jtfUF.setBackground(new java.awt.Color(235, 235, 235));
        jtfUF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfUF.setBorder(null);
        MeuCadastro.add(jtfUF);
        jtfUF.setBounds(760, 320, 50, 20);

        jtfRua.setBackground(new java.awt.Color(235, 235, 235));
        jtfRua.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfRua.setBorder(null);
        MeuCadastro.add(jtfRua);
        jtfRua.setBounds(440, 120, 240, 20);

        jtfCEP.setBackground(new java.awt.Color(235, 235, 235));
        jtfCEP.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfCEP.setBorder(null);
        MeuCadastro.add(jtfCEP);
        jtfCEP.setBounds(440, 180, 260, 20);

        jtfBairro.setBackground(new java.awt.Color(235, 235, 235));
        jtfBairro.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfBairro.setBorder(null);
        MeuCadastro.add(jtfBairro);
        jtfBairro.setBounds(440, 250, 360, 20);

        jtfCidade.setBackground(new java.awt.Color(235, 235, 235));
        jtfCidade.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfCidade.setBorder(null);
        MeuCadastro.add(jtfCidade);
        jtfCidade.setBounds(440, 315, 270, 20);

        jtfUsuario.setBackground(new java.awt.Color(235, 235, 235));
        jtfUsuario.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfUsuario.setBorder(null);
        MeuCadastro.add(jtfUsuario);
        jtfUsuario.setBounds(440, 380, 370, 20);

        jtfSenha.setBackground(new java.awt.Color(235, 235, 235));
        jtfSenha.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jtfSenha.setBorder(null);
        MeuCadastro.add(jtfSenha);
        jtfSenha.setBounds(450, 440, 350, 20);

        CampoCidade.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campo.png"))); // NOI18N
        MeuCadastro.add(CampoCidade);
        CampoCidade.setBounds(430, 310, 300, 40);

        CampoRua3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campo.png"))); // NOI18N
        MeuCadastro.add(CampoRua3);
        CampoRua3.setBounds(430, 175, 300, 40);

        CampoRua5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoPequeno.png"))); // NOI18N
        MeuCadastro.add(CampoRua5);
        CampoRua5.setBounds(750, 310, 80, 50);

        CampoBairro1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoMaior.png"))); // NOI18N
        MeuCadastro.add(CampoBairro1);
        CampoBairro1.setBounds(430, 240, 390, 50);

        CampoRua6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoMaior.png"))); // NOI18N
        MeuCadastro.add(CampoRua6);
        CampoRua6.setBounds(430, 40, 390, 50);

        CampoRua7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoPequeno.png"))); // NOI18N
        MeuCadastro.add(CampoRua7);
        CampoRua7.setBounds(750, 110, 80, 50);

        jLabel11.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(0, 152, 209));
        jLabel11.setText("Usuário:");
        MeuCadastro.add(jLabel11);
        jLabel11.setBounds(440, 360, 60, 15);

        CampoUsuario.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoMaior.png"))); // NOI18N
        MeuCadastro.add(CampoUsuario);
        CampoUsuario.setBounds(430, 370, 390, 50);

        jLabel12.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(0, 152, 209));
        jLabel12.setText("Senha:");
        MeuCadastro.add(jLabel12);
        jLabel12.setBounds(440, 420, 60, 15);

        CampoSenha.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campoMaior.png"))); // NOI18N
        MeuCadastro.add(CampoSenha);
        CampoSenha.setBounds(430, 430, 390, 50);

        btnSalvarMeuC.setBackground(new java.awt.Color(0, 152, 209));
        btnSalvarMeuC.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnSalvarMeuC.setForeground(new java.awt.Color(255, 255, 255));
        btnSalvarMeuC.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconSalvar.png"))); // NOI18N
        btnSalvarMeuC.setText("Salvar");
        btnSalvarMeuC.setBorder(null);
        btnSalvarMeuC.setBorderPainted(false);
        btnSalvarMeuC.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnSalvarMeuC.setFocusPainted(false);
        btnSalvarMeuC.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSalvarMeuCActionPerformed(evt);
            }
        });
        MeuCadastro.add(btnSalvarMeuC);
        btnSalvarMeuC.setBounds(570, 510, 110, 40);

        btnEditarMeuC.setBackground(new java.awt.Color(0, 152, 209));
        btnEditarMeuC.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnEditarMeuC.setForeground(new java.awt.Color(255, 255, 255));
        btnEditarMeuC.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconEditar.png"))); // NOI18N
        btnEditarMeuC.setText("Editar");
        btnEditarMeuC.setBorder(null);
        btnEditarMeuC.setBorderPainted(false);
        btnEditarMeuC.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnEditarMeuC.setFocusPainted(false);
        btnEditarMeuC.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEditarMeuCActionPerformed(evt);
            }
        });
        MeuCadastro.add(btnEditarMeuC);
        btnEditarMeuC.setBounds(450, 510, 110, 40);

        btnCancelarMeuC.setBackground(new java.awt.Color(0, 152, 209));
        btnCancelarMeuC.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnCancelarMeuC.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelarMeuC.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconCancelar.png"))); // NOI18N
        btnCancelarMeuC.setText("Cancelar");
        btnCancelarMeuC.setBorder(null);
        btnCancelarMeuC.setBorderPainted(false);
        btnCancelarMeuC.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnCancelarMeuC.setFocusPainted(false);
        btnCancelarMeuC.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelarMeuCActionPerformed(evt);
            }
        });
        MeuCadastro.add(btnCancelarMeuC);
        btnCancelarMeuC.setBounds(690, 510, 110, 40);

        CampoRua4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/campo.png"))); // NOI18N
        MeuCadastro.add(CampoRua4);
        CampoRua4.setBounds(430, 110, 300, 40);

        btnBuscarCEP.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        btnBuscarCEP.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/iconPesquisar.png"))); // NOI18N
        btnBuscarCEP.setBorder(null);
        btnBuscarCEP.setBorderPainted(false);
        btnBuscarCEP.setContentAreaFilled(false);
        btnBuscarCEP.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnBuscarCEP.setFocusable(false);
        btnBuscarCEP.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBuscarCEPActionPerformed(evt);
            }
        });
        MeuCadastro.add(btnBuscarCEP);
        btnBuscarCEP.setBounds(730, 170, 60, 40);

        Principal.add(MeuCadastro, "meuCadastro");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Principal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(MenuSuperior, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addComponent(MenuSuperior, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0)
                .addComponent(Principal, javax.swing.GroupLayout.DEFAULT_SIZE, 583, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnFaturasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnFaturasActionPerformed
        MudarTelaMenu("Faturas");
        carregarTable();
    }//GEN-LAST:event_btnFaturasActionPerformed

    private void btnMeuCadastroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMeuCadastroActionPerformed
        MudarTelaMenu("meuCadastro");
    }//GEN-LAST:event_btnMeuCadastroActionPerformed

    private void btnSairActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSairActionPerformed
        Login login = new Login();
        login.setVisible(true);
        dispose();
    }//GEN-LAST:event_btnSairActionPerformed

    private void btnEditarMeuCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditarMeuCActionPerformed
        HabilitarMeuCadastro(true);
    }//GEN-LAST:event_btnEditarMeuCActionPerformed

    private void btnSalvarMeuCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSalvarMeuCActionPerformed
        cliente.setNome(jtfNome.getText());
        cliente.setCep(jtfCEP.getText());
        cliente.setRua(jtfRua.getText());
        cliente.setNum_casa(Integer.parseInt(jtfNum.getText()));
        cliente.setBairro(jtfBairro.getText());
        cliente.setCidade(jtfCidade.getText());
        cliente.setUF(jtfUF.getText());
        cliente.setUsuario(jtfUsuario.getText());
        cliente.setSenha(jtfSenha.getText());

        try {
            enderecoBD.alterar(cliente);
            JOptionPane.showMessageDialog(this, "Dados alterados com Sucesso!");
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this, "Erro ao alterar dados!\n" + ex.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
        HabilitarMeuCadastro(false);
    }//GEN-LAST:event_btnSalvarMeuCActionPerformed

    private void btnCancelarMeuCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelarMeuCActionPerformed
        int opcao = JOptionPane.showConfirmDialog(this, "Deseja cancelar a alteração dos Dados?");
        if (opcao == 0) {
            carregarCampos();
            HabilitarMeuCadastro(false);
        }
    }//GEN-LAST:event_btnCancelarMeuCActionPerformed

    private void btnBuscarCEPActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBuscarCEPActionPerformed
        ViaCEP viaCep = new ViaCEP();

        try {
            viaCep.buscar(jtfCEP.getText());

            jtfRua.setText(viaCep.getLogradouro());
            jtfBairro.setText(viaCep.getBairro());
            jtfCidade.setText(viaCep.getLocalidade());
            jtfUF.setText(viaCep.getUf());

        } catch (ViaCEPException ex) {
            JOptionPane.showMessageDialog(this, "Erro ao buscar CEP.\n" + ex.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnBuscarCEPActionPerformed

    private void btnImprimirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnImprimirActionPerformed
        PrinterJob pj = PrinterJob.getPrinterJob();
        pj.setJobName(" Print Component ");
        pj.setPrintable(new Printable() {
            public int print(Graphics pg, PageFormat pf, int pageNum) {
                if (pageNum > 0) {
                    return Printable.NO_SUCH_PAGE;
                }
                Graphics2D g2 = (Graphics2D) pg;
                g2.translate(pf.getImageableX(), pf.getImageableY());
                Fatura.paint(g2);        // o JPanel aqui
                return Printable.PAGE_EXISTS;
            }
        });
        if (pj.printDialog() == false) {
            return;
        }
        try {
            pj.print();
        } catch (PrinterException ex) {
            JOptionPane.showMessageDialog(this, "Erro ao buscar CEP.\n" + ex.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnImprimirActionPerformed

    private void jtFaturasMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jtFaturasMouseClicked
        fatura = faturaTM.getRowValue(jtFaturas.getSelectedRow());

        //Formata Data
        Date data = fatura.getDt_venc();
        Locale local = new Locale("pt", "BR");
        DateFormat formato = new SimpleDateFormat("dd/MM/yyyy", local);
        String dataFormatada = formato.format(data);

        lblDataVenc.setText(dataFormatada);

        //Formata Valor Total
        double preco = fatura.getValorTotal();
        Locale ptBr = new Locale("pt", "BR");
        String valoTotal = NumberFormat.getCurrencyInstance(ptBr).format(preco);

        lblValorTotal.setText(valoTotal);

        lblValorImposto.setText("" + fatura.getVal_imposto());
        lblPorcentagemBand.setText("" + fatura.getPorcentagem());
        lblQtdKw.setText("" + fatura.getKwGastos());

        double valorGasto = fatura.getKwGastos() * fatura.getVal_kw();
        lblValorTotalKw.setText("" + fatura.getKwGastos() * fatura.getVal_kw());
        
        valorGasto += valorGasto * (fatura.getVal_imposto() / 100);
        
        lblValorKwPorcentagem.setText("" + (fatura.getKwGastos() * fatura.getVal_kw()) * (fatura.getPorcentagem() / 100));
       
        
        valorGasto += valorGasto * (fatura.getPorcentagem() / 100);
        lblValorImposto.setText("" + ((fatura.getKwGastos() * fatura.getVal_kw()) * (fatura.getPorcentagem() / 100)) * (fatura.getVal_imposto() / 100));
        
        


    }//GEN-LAST:event_jtFaturasMouseClicked

    private void MudarTelaMenu(String tela) {
        CardLayout cl = (CardLayout) Principal.getLayout();
        cl.show(Principal, tela);
    }

    private void tarifaAtual() {
        try {
            tarifas = tarifasBD.getDados();
            lblBandeira.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Img/" + tarifas.getCor() + ".png")));

        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this, "Erro ao buscar tarifas.\n" + ex.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void carregarCampos() {
        jtfNome.setText(cliente.getNome());
        jtfRua.setText(cliente.getRua());
        jtfNum.setText("" + cliente.getNum_casa());
        jtfCEP.setText(cliente.getCep());
        jtfBairro.setText(cliente.getBairro());
        jtfCidade.setText(cliente.getCidade());
        jtfUF.setText(cliente.getUF());
        jtfUsuario.setText(cliente.getUsuario());
        jtfSenha.setText(cliente.getSenha());

        lblNome.setText(cliente.getNome());
        lblEndereco.setText(cliente.getRua() + ", " + cliente.getNum_casa());
        lblCEP.setText(cliente.getCep());
        lblBairro.setText(cliente.getBairro());
        lblCidadeUF.setText(cliente.getCidade() + "/" + cliente.getUF());
    }

    private void HabilitarMeuCadastro(boolean modo) {
        jtfNome.setEnabled(modo);
        jtfCEP.setEnabled(modo);
        jtfRua.setEnabled(modo);
        jtfNum.setEnabled(modo);
        jtfBairro.setEnabled(modo);
        jtfCidade.setEnabled(modo);
        jtfUF.setEnabled(modo);
        jtfUsuario.setEnabled(modo);
        jtfSenha.setEnabled(modo);
        btnSalvarMeuC.setEnabled(modo);
        btnCancelarMeuC.setEnabled(modo);
        btnEditarMeuC.setEnabled(!modo);
    }

    private void carregarTable() {
        FaturasTableModel faturas = (FaturasTableModel) jtFaturas.getModel();
        try {
            faturas.setDados(faturaBD.getDados(cliente.getId_usuario()));
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this, "Erro ao carregar grade.\n" + ex.getMessage(), "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel CampoBairro1;
    private javax.swing.JLabel CampoCidade;
    private javax.swing.JLabel CampoRua3;
    private javax.swing.JLabel CampoRua4;
    private javax.swing.JLabel CampoRua5;
    private javax.swing.JLabel CampoRua6;
    private javax.swing.JLabel CampoRua7;
    private javax.swing.JLabel CampoSenha;
    private javax.swing.JLabel CampoUsuario;
    private javax.swing.JPanel Fatura;
    private javax.swing.JPanel Faturas;
    private javax.swing.JPanel Menu;
    private javax.swing.JPanel MenuSuperior;
    private javax.swing.JPanel MeuCadastro;
    private javax.swing.JPanel Principal;
    private javax.swing.JButton btnBuscarCEP;
    private javax.swing.JButton btnCancelarMeuC;
    private javax.swing.JButton btnEditarMeuC;
    private javax.swing.JButton btnFaturas;
    private javax.swing.JButton btnImprimir;
    private javax.swing.JButton btnMeuCadastro;
    private javax.swing.JButton btnSair;
    private javax.swing.JButton btnSalvarMeuC;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabelTarifa;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jtFaturas;
    private javax.swing.JTextField jtfBairro;
    private javax.swing.JTextField jtfCEP;
    private javax.swing.JTextField jtfCidade;
    private javax.swing.JTextField jtfNome;
    private javax.swing.JTextField jtfNum;
    private javax.swing.JTextField jtfRua;
    private javax.swing.JPasswordField jtfSenha;
    private javax.swing.JTextField jtfUF;
    private javax.swing.JTextField jtfUsuario;
    private javax.swing.JLabel lblBairro;
    private javax.swing.JLabel lblBandFatura;
    private javax.swing.JLabel lblBandeira;
    private javax.swing.JLabel lblCEP;
    private javax.swing.JLabel lblCidadeUF;
    private javax.swing.JLabel lblDataVenc;
    private javax.swing.JLabel lblEndereco;
    private javax.swing.JLabel lblImposto;
    private javax.swing.JLabel lblNome;
    private javax.swing.JLabel lblPorcentagemBand;
    private javax.swing.JLabel lblQtdKw;
    private javax.swing.JLabel lblQtdKw4;
    private javax.swing.JLabel lblValorImposto;
    private javax.swing.JLabel lblValorKw;
    private javax.swing.JLabel lblValorKw2;
    private javax.swing.JLabel lblValorKw6;
    private javax.swing.JLabel lblValorKw7;
    private javax.swing.JLabel lblValorKw8;
    private javax.swing.JLabel lblValorKwPorcentagem;
    private javax.swing.JLabel lblValorTotal;
    private javax.swing.JLabel lblValorTotalKw;
    // End of variables declaration//GEN-END:variables
}
